<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf8"/>
<title>
创建一个立方体（需要部署服务器访问html页面：http://localhost:8080/webgl/html/three/three1.html，贴图需要访问服务）
需要不停渲染才能看到图片
</title>
</head>

<script type="text/javascript" src="../../js/jquery-1.7.1.js"></script>
<script type="text/javascript" src="../../js/Stats.js"></script>
<script type="text/javascript" src="../../js/three.js"></script>
<script type="text/javascript" src="../../js/tween.min.js"></script>
<body>
        <canvas id="webglcanvas" style="" width="400" height="400">
  		</canvas> 
  		<!-- var mapUrl="http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg";
    	 //mapUrl ="http://pic13.nipic.com/20110315/2457331_201040598000_2.jpg"; -->
  		<img alt="" src="http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg">
</body>
<script type="text/javascript">
//三大组件
var canvas=document.getElementById("webglcanvas");
var cube;//网格;

var scene;//场景
var renderer;//渲染器
var camera;//照相机


$(function(){
	   update_canvas();//cavas移动
	   
	   initScene(); //初始化场景
	   initThree(); //初始化渲染器
       initCamera();//初始化照相机
       initLight(); //初始化光
       initObject();//新建物体并放入场景中
       
       animation();//渲染开始
})

function initScene() {//场景
    scene = new THREE.Scene();
}
function initThree() {//渲染器
	
	//创建three.js渲染器并添加到canvas中
    renderer = new THREE.WebGLRenderer({
        canvas:canvas,antialias : true
    });
    //设置视口尺寸
    renderer.setSize(canvas.width, canvas.height);
}


function initCamera() {//照相机
	//创建相机，以便观察整个场景
    camera = new THREE.PerspectiveCamera(45, canvas.width / canvas.height, 1, 4000);
    scene.add(camera);
   /*   camera.position.x = 600;
    camera.position.y = 0;
    camera.position.z = 600;
    camera.up.x = 0;
    camera.up.y = 1;
    camera.up.z = 0;
    camera.lookAt({
        x : 0,
        y : 0,
        z : 0
    });  */
}

var light;
function initLight() {//光
	//1.环境光
			  light = new THREE.AmbientLight(0x990000);//a.光的颜色
		     light.position.set(100, 100, 200); 
	/*  //2.平行光
		 // 第二个参数是光源强度，你可以改变它试一下
	      light = new THREE.DirectionalLight(0xFF0000,1);
	      // 位置不同，方向光作用于物体的面也不同，看到的物体各个面的颜色也不一样
	      light.position.set(0,0,1); 
          scene.add(light);
     
	     //再添加一个光源
	     light1 = new THREE.DirectionalLight(0x00FF00,1);
	     light1.position.set(1,0,0); 
	      scene.add(light1);
	      */
	      //环境光
	      light3 = new THREE.AmbientLight(0x00FF00);//a.光的颜色
		  light3.position.set(100, 100, 200);
		  scene.add(light3); 
		  
		  //点光源
		  light4 = new THREE.PointLight(0xFF0000);
		  light4.position.set(0,0,50);
		  scene.add(light4);
}


function initObject() {
    //创建一个纹理映射的立方体并将其添加到场景中
    
      //1.创建纹理映射
     var mapUrl="http://img.zcool.cn/community/0117e2571b8b246ac72538120dd8a4.jpg@1280w_1l_2o_100sh.jpg";
    	 mapUrl="http://localhost:8080/webgl/image/aa.jpg";
    
      var map=THREE.ImageUtils.loadTexture(mapUrl);
      //2.创建一个基础材质，传入纹理映射
      var material=new THREE.MeshBasicMaterial({map:map});
      //3.创建立方体几何形状
      //var geometry=new THREE.CubeGeometry(2,2,2);
      var geometry=new THREE.PlaneGeometry(10,6);
      //将几何体和材质整合到一个网格中;
      cube=new THREE.Mesh(geometry,material);
      //将网格移动到与相机有一段距离的位置，并朝向观察者倾斜
      cube.position.z=-8;
      cube.rotation.x=Math.PI/5;
      cube.rotation.y=Math.PI/5;
      //最后将网格添加到场景中
      scene.add(cube);
}

function animation()
{
	 //renderer.clear();
	 
	 
	 
    renderer.render(scene, camera);//渲染
    //动画
    cube.rotation.y +=0.01; 
    cube.rotation.x +=0.01; 
    cube.rotation.z +=0.01; 
    
    requestAnimationFrame( animation );//循环animation()
}


//canvas整体运动效果
function update_canvas(){
	var canvasob=$("#webglcanvas");
	canvasob.css({"position":"relative"});
	//canvasob.css({"background-color":"#f00"});
	$("body").css({"background-color":"#9f5"});
	var m=800;//移动范围距离
	var num=1;//移动总距离
	var jishu=1;//移动距离基数
	var date=10;//ms
	var a=0;
	var id=setInterval(function(){
		if(a==0&&num<=m){
			num+=jishu;
		}else{
			a=1;
		};
		if(a==1&&num>=0){
			num-=jishu;
		}else{
			a=0;
		}
		canvasob.css({"left":num+"px","lef":num+"px"});
	},date);  
	
}

</script>
</html>